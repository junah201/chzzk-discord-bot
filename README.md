# 치직

<img width="1344" height="756" alt="image" src="https://github.com/user-attachments/assets/5094ed5f-cc37-487f-b156-60da365a3e72" />

## 🚀 주요 기능

* **실시간 알림**: 방송이 켜진 후 최대 5분 이내로 알림이 전송됩니다.
* **간편한 대시보드**: 웹 대시보드를 통해 손쉽게 알림을 관리할 수 있습니다.
* **커스텀 메시지**: 멘션(@everyone, 특정 유저) 및 디스코드 마크다운을 지원합니다.

---

## 📖 사용법 (User Guide)

### 1. 시작하기 (봇 설치)

치직 서비스를 이용하기 위해서는 먼저 디스코드 서버에 봇을 초대하고 권한을 설정해야 합니다.

1. [이 링크](https://www.google.com/search?q=https://api.chzzk.junah.dev/invite)를 클릭하여 봇을 초대합니다.
2. 봇을 추가할 **서버를 선택**하고 `계속하기`를 누릅니다.
3. 필수 권한(채널 보기, 메시지 보내기 등)을 확인하고 `승인`하면 초대가 완료됩니다.

> [!WARNING]
> **봇을 초대했다고 끝이 아닙니다!**
> 봇이 서버에 들어와 있어도, **알림을 보낼 특정 채널에 '메시지 보내기' 권한**이 없으면 알림이 절대 전송되지 않습니다.
> 반드시 해당 채널 설정(`채널 편집` > `권한`)에서 치직 봇의 다음 권한을 **허용**해주세요:
> * **채널 보기**
> * **메시지 보내기**
> * **링크 첨부 / 파일 첨부**
> * **@everyone, @here, 모든 역할 멘션하기** (필요시)
>

### 2. 알림 등록하기

1. [치직 봇 대시보드](https://chzzk.junah.dev)에 접속하여 디스코드 계정으로 로그인합니다.
2. 관리자 권한이 있는 서버를 선택하고 `대시보드` 버튼을 누릅니다.
3. **치지직 채널 ID**와 알림을 받을 **디스코드 채널**을 선택합니다.
4. `추가하기` 버튼을 눌러 설정을 저장합니다.

> [!WARNING]
> **치지직 닉네임을 입력하지 마세요!**
> 치지직 ID란 스트리머의 닉네임이 아닙니다. 채널 URL의 **맨 마지막 부분에 있는 고유 ID**를 입력해야 합니다.
> * ❌ 잘못된 예: `김치직`, `kimchzzk`
> * ✅ 올바른 예: `bb382c2c0cc9fa7c86ab3b037fb5799c`
> * *(URL 예시: `https://chzzk.naver.com/live/bb382c2c0cc9fa7c86ab3b037fb5799c`)*
>
>

### 3. 메시지 커스텀 (멘션 및 꾸미기)

방송 알림 메시지에 전체 멘션, 특정 유저 호출, 혹은 텍스트 꾸미기를 적용할 수 있습니다.

#### 멘션 기능

| 대상 | 입력 방법 | 설명 |
| --- | --- | --- |
| **전체 멘션** | `@everyone` | 서버의 모든 사람에게 알림 |
| **현재 접속자** | `@here` | 현재 온라인인 사람에게 알림 |
| **특정 유저** | `<@유저ID>` | 특정 유저만 콕 집어 알림 (예: `<@123456789>`) |
| **특정 역할** | `<@&역할ID>` | 특정 역할을 가진 그룹 알림 (예: `<@&987654321>`) |

> [!WARNING]
> **역할 멘션 시 문법 주의**
> 특정 역할을 멘션할 때는 반드시 ID 앞에 **`&` (앰퍼샌드)** 기호가 포함되어야 합니다.
> * ❌ 작동 안 함: `<@987654321>` (유저 멘션으로 인식됨)
> * ✅ 정상 작동: `<@&987654321>`
>
>

---

## ❓ 자주 묻는 질문 (FAQ) & 문제 해결

**Q. 400 해당 치지직의 채널을 찾을 수 없습니다.**

> * ID 입력이 잘못되었을 확률이 높습니다.
> * 닉네임이 아닌 **고유 식별자 ID**인지 다시 한번 확인해주세요.
> * 또한, 한 번도 방송을 켜지 않은 채널은 등록이 불가능합니다.

**Q. 500 테스트 알림 전송에 실패했습니다.**

> * 권한 부족 오류입니다.
> * 봇이 해당 디스코드 채널에 메시지를 보낼 권한이 없습니다. 채널 설정에서 치직 봇에게 **'메시지 보내기'** 권한을 허용했는지 반드시 확인해주세요.

**Q. 400 이미 해당 디스코드 채널에 등록된 치지직 채널입니다.**

> * 한 디스코드 채널에 동일한 치지직 방송 알림을 중복해서 등록할 수 없습니다.

**Q. 404 해당 디스코드 채널이 존재하지 않습니다.**

> * 봇이 추방되었거나 채널이 삭제되었습니다.
> * 알림을 받던 디스코드 채널이 삭제되었거나, 치직 봇이 서버에서 추방된 경우 발생합니다. 봇을 다시 초대하거나 채널 설정을 업데이트해주세요.

---

## 🛠 기술 스택 및 구조

이 프로젝트는 **Serverless Framework**를 기반으로 한 **AWS Lambda**와 **DynamoDB**를 사용하고 있으며, 프론트엔드는 **Next.js**로 구축되었습니다.

### 폴더 구조

```text
📦
 ┣ 📂 frontend : 치직 봇 대시보드 웹사이트 코드입니다. (Next.js)
 ┣ 📂 lambdas
 ┃ ┣ 📂 event_handler : 알림 추가/삭제, 슬래시 명령어 및 버튼 이벤트 처리
 ┃ ┣ 📂 link_check : 5분마다 방송 상태를 확인하는 크롤러
 ┃ ┗ 📂 naver_session_renew : 12시간마다 네이버 세션을 갱신하는 로직
 ┣ 📂 shared : Lambda 함수 간 공유되는 공통 코드 및 유틸리티
 ┗ 📜 serverless.yml : AWS 인프라(Lambda, IAM 등) 설정 파일
```

---

### 📞 문의하기

위 방법으로 해결되지 않는다면 [서포트 서버](https://chzzk.junah.dev/support-server)에 방문하여 문의해주세요.
